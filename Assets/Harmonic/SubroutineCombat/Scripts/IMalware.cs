using UnityEngine;
using System.Collections;

public interface IMalware {

	Transform transform {get;}
	GameObject gameObject {get;}
	/// <summary>
	/// Gets the attack priority.
	/// </summary>
	/// <value>The attack priority. This should NEVER be zero</value>
	short AttackPriority {get;}
    VirusAI.VirusType Type {get;}
	void TakeDamage(float amount);

}

public interface ILurker : IMalware {
    /// <summary>
    /// triggered when a machine is cleaned the first time
    /// </summary>
    void OnMachineClean();
    /// <summary>
    /// triggered when the whole subnet is supposedly clean
    /// </summary>
    void OnSubnetSupposedlyClean();
    bool IsLurking { get; }
}

public static class MalwareExtensions {
    /// <summary>
    /// Returns True if IMalware is an ILurker and currently Lurking.
    /// Lurking malware are intended to be invisible and untargetable.
    /// </summary>
    /// <param name="self"></param>
    /// <returns></returns>
    public static bool IsLurking(this IMalware self)
    {
        return (self is ILurker) && (self as ILurker).IsLurking;
    }

}

